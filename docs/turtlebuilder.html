<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html><head><title>Fluxus manual v0.9</title><link rel="stylesheet" href="fluxusdoc.css"></head><body>
<hdr><a href="index.html">Fluxus manual</a> v0.9 : (C) 2005 Dave Griffiths : dave at pawfal dot org : <a href="http://www.pawfal.org">www.pawfal.org</a></hdr>

<h1>14.0 Turtle builder</h1>
The turtle polybuilder is an experimental way of building polygonal objects 
using a logo style turtle in 3D space. as you drive the turtle around you can 
place vertices and build shapes procedurally.

<c>(turtle-prim type)</c>
starts a new primitive of the type specified:
0: triangle strip
1: quad list
2: triangle list
3: triangle fan
4: general polygon

<c>(turtle-move distance)</c>
moves the turtle forward in it's current orientation

<c>(turtle-turn anglevec)</c>
rotates the turtle's orientation with the supplied euler angles

<c>(turtle-vert)</c>
creates a new vertex in the current position

<c>(turtle-build)</c>
builds the object with the vertex list defined and gives it to the renderer

<c>(turtle-reset)</c>
resets the current postion and rotation of the turtle

<c>(turtle-push)</c> <c>(turtle-pop)</c>
the turtle build has it's own transform stack

time for some examples:

this script simply builds a single polygon circle, by playing the age old turtle
trick of looping a function that moves a bit, turns a bit...

<c>(define (build n)
    (turtle-reset)
    (turtle-prim 4)
    (build-loop n n)
    (turtle-build))

(define (build-loop n t)
    (turtle-turn (vector 0 (/ 360 t) 0))
    (turtle-move 1)
    (turtle-vert)
    (if (< n 1)
        0
        (build-loop (- n 1) t)))

    
(backfacecull 0)    
(clear)
(hint-unlit)
(hint-wire)
(line-width 4)</c>

<img src="images/turtle.jpg">
a circle

for a more complex example, just modfiy the <c>(build-loop)</c> function as so:

<c>(define (build-loop n t)
    (turtle-turn (vector 0 (/ 360 t) 0))
    (turtle-move 1)
    (turtle-vert)
    (if (< n 1)
        0
        (begin
            (build-loop (- n 1) t)          ; add another call to the recursion
            (turtle-turn (vector 0 0 45))   ; twist a bit
            (build-loop (- n 1) t))))</c>
			
<img src="images/turtlecomplex.jpg">
a circle of circles
